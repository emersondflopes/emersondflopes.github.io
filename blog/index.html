<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Emerson Lopes - Blog</title>

    <link rel="stylesheet" href="../css/style.css" />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.0.12/css/all.css"
      integrity="sha384-G0fIWCsCzJIMAVNQPfjH08cyYaUtMwjJwqiRKxxE/rx96Uroj1BtIQ6MLJuheaO9"
      crossorigin="anonymous"
    />

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-119143752-1"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());

      gtag('config', 'UA-119143752-1');
    </script>
  </head>

  <body>
    <nav class="navbar">
      <a href="https://lupuselit.github.io/">
        <span> <i class="fas fa-code" id="icon"></i> </span>
      </a>

      <div class="navbar--left__before">
        <ul id="navbar--left" class="navbar--left">
          <a href="https://lupuselit.github.io/#about"> <li>About</li> </a>
          <a href="https://lupuselit.github.io/blog/index.html" target="_blank">
            <li>Blog</li>
          </a>
          <a href="https://lupuselit.github.io/#projects">
            <li>projects</li>
          </a>
          <a href="https://lupuselit.github.io/#contact"> <li>contact</li> </a>
        </ul>
        <span class="navbar--menu"> <i class="fas fa-bars"></i> </span>
      </div>
    </nav>

    <div class="blog">
        <section class="all-posts">
          </section>
    </div>

  <script>
  
  fetch('https://api.rss2json.com/v1/api.json?rss_url=https://medium.com/feed/@lupuselit')
   .then((res) => res.json())
   .then((data) => {

      // console.log(data);
      
       // Fillter the array
       const res = data.items //This is an array with the content. No feed, no info about author etc..
       const posts = res.filter(item => item.categories.length > 0) // That's the main trick* !
       
       function toText(node) {
         let tag = document.createElement('div')
         tag.innerHTML = node
         node = tag.innerText
         return node
      }
      
       function shortenText(text,startingPoint ,maxLength) {
       return text.length > maxLength?
          text.slice(startingPoint, maxLength):
          text
      }

      console.log(posts);
      
      
      let output = '';
      posts.forEach((item) => {
         output += `

          <div class="single-post">
            <a href="${item.link}">
              <h3 class="title">${shortenText(item.title, 0, 60) + '...'}</h3>
            </a>

            <h4>${shortenText(item.pubDate,0 ,10)}</h4>

            <p>
                ${'...' + shortenText(toText(item.content),100, 500)+ '...'}
            </p>

            <a href="${item.link}">
              <p class="tags">Read it on Medium...</p>
            </a>
            
          </div>
          `
// <!-- 
//          <li class="blog__post">
//             <a href="${item.link}">
//                <img src="${item.thumbnail}" class="blog__topImg"></img>
//                <div class="blog__content">
//                   <div class="blog_preview">
//                      <h2 class="blog__title">${shortenText(item.title, 0, 30)+ '...'}</h2>
//                      <p class="blog__intro">${'...' + shortenText(toText(item.content),60, 300)+ '...'}</p>
//                   </div>
//                   <hr>
//                   <div class="blog__info">
//                      <span class="blog__author">${item.author}</span>
//                      <span class="blog__date">${shortenText(item.pubDate,0 ,10)}</span>
//                   </div>
//                </div>
//             <a/>
//          </li>` -->
      })
      document.querySelector('.all-posts').innerHTML = output
    })

    </script>


<!-- 
    <div class="blog">
      <section class="all-posts">
        <div class="single-post">
          <a href="posts/intro-to-c.html">
            <h3 class="title">Introduction to C</h3>
          </a>

          <h4>19 November, 2018</h4>

          <p>
            In this post I will show how to create a simple C programing app
            <a href="posts/node-server.html">read more</a>
          </p>

          <p class="tags">Tags: C, Computer Science</p>
        </div>

        <div class="single-post">
          <a href="posts/node-server.html">
            <h3 class="title">How to create a simple NodeJS Server</h3>
          </a>

          <h4>21 april, 2018</h4>

          <p>
            In this post I will show how to create a simple (very simple) NodeJS
            Web App using ExpressJS.
            <a href="posts/node-server.html">read more</a>
          </p>

          <p class="tags">Tags: JavaScript, NodeJS, ExpressJS</p>
        </div>

        <div class="single-post">
          <a href="posts/node-server.html">
            <h3 class="title">Installing NodeJS and NPM</h3>
          </a>

          <h4>12 March, 2018</h4>

          <p>
            In this post I will show how to install NodeJS on your computer.
            <a href="posts/node-server.html">read more</a>
          </p>

          <p class="tags">Tags: NodeJS, JavaScript</p>
        </div>

        <div class="single-post">
          <a href="posts/#">
            <h3 class="title">Create your first webpage</h3>
          </a>

          <h4>18 January, 2018</h4>

          <p>
            In this post I will show how to create a website and open it locally
            <a href="posts/#">read more</a>
          </p>

          <p class="tags">Tags: HTML</p>
        </div>

        <div class="single-post">
          <a href="posts/#">
            <h3 class="title">How I Learned How to Code</h3>
          </a>

          <h4>24 February, 2018</h4>

          <p>
            I'll write about my coding journey and the challenges I faced while
            teaching myself programming. <a href="posts/#">read more</a>
          </p>

          <p class="tags">Tags: Programming</p>
        </div>
      </section>
    </div> -->

    <footer>
      Coded and designed with <i class="far fa-heart"></i> by
      <a href="https://github.com/lupuselit" target="_blank">Emerson Lopes</a>
    </footer>

    <script src="../javascript/script.js"></script>
  </body>
</html>
